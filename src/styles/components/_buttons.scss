@use 'tokens/colors' as *;
@use 'tokens/radius' as *;
@use 'tokens/shadows' as *;
@use 'tokens/motion' as *;
@use 'tokens/typography' as *;
@use 'tokens/surfaces' as *;

/* ===========================
   Unified Button System
   =========================== */

/* Base button shape - shared by all variants */
%btn-base {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  gap: 0.5rem;
  padding: 0.625rem 1.25rem;
  border-radius: $radius-pill;
  border: 1px solid transparent;
  font-size: 0.875rem;
  font-weight: 600;
  line-height: 1.15;
  cursor: pointer;
  text-decoration: none;
  white-space: nowrap;
  box-shadow: $shadow-depth-2;
  transition:
    background-color $motion-fast $motion-ease,
    color $motion-fast $motion-ease,
    border-color $motion-fast $motion-ease,
    box-shadow $motion-fast $motion-ease,
    transform $motion-fast $motion-ease;

  i {
    font-size: 1.1em;
    flex-shrink: 0;
  }

  &:disabled {
    opacity: 0.5;
    cursor: not-allowed;
    pointer-events: none;
  }

  &:hover:not(:disabled) {
    transform: translateY(-1px);
    box-shadow: $shadow-depth-3;
  }

  &:active:not(:disabled) {
    transform: translateY(0);
  }

  &:focus-visible {
    outline: 2px solid $accent-teal;
    outline-offset: 2px;
  }
}

/* ===========================
   Primary Button (Teal Accent)
   =========================== */
.btn-primary {
  @extend %btn-base;
  background: $accent-teal;
  color: $btn-accent-text;

  &:hover:not(:disabled) {
    background: $accent-teal-active;
  }

  &:active:not(:disabled) {
    background: $accent-teal;
    filter: brightness(0.95);
  }
}

/* ===========================
   Secondary Button (Outline)
   =========================== */
.btn-secondary {
  @extend %btn-base;
  background: $surface-layer-3;
  color: $text-primary;
  border-color: $btn-secondary-border;
  box-shadow: none;

  &:hover:not(:disabled) {
    background: $surface-layer-4;
    border-color: $btn-secondary-border-hover;
    box-shadow: $shadow-depth-1;
  }

  &:active:not(:disabled) {
    background: $surface-layer-5;
  }

  &:focus-visible {
    outline: 2px solid $btn-secondary-border-hover;
    outline-offset: 2px;
  }
}

/* ===========================
   Danger Button (Destructive Actions)
   =========================== */
.btn-danger {
  @extend %btn-base;
  background: rgba(239, 68, 68, 0.1);
  color: #ef4444;
  border-color: #ef4444;
  box-shadow: none;

  &:hover:not(:disabled) {
    background: rgba(239, 68, 68, 0.2);
    border-color: #f87171;
    box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
  }

  &:active:not(:disabled) {
    background: rgba(239, 68, 68, 0.25);
  }

  &:focus-visible {
    outline: 2px solid #ef4444;
    outline-offset: 2px;
  }
}

/* ===========================
   Ghost Button (Minimal)
   =========================== */
.btn-ghost {
  @extend %btn-base;
  background: transparent;
  color: $text-secondary;
  border-color: transparent;
  box-shadow: none;

  &:hover:not(:disabled) {
    background: $surface-layer-2;
    color: $text-primary;
    box-shadow: none;
  }

  &:active:not(:disabled) {
    background: $surface-layer-3;
  }
}

/* ===========================
   Gold Accent Button (Alternative Primary)
   =========================== */
.btn-gold {
  @extend %btn-base;
  background: $accent-gold-soft;
  color: $btn-accent-text;

  &:hover:not(:disabled) {
    background: $accent-gold-active;
  }

  &:active:not(:disabled) {
    background: $accent-gold-soft;
    filter: brightness(0.95);
  }

  &:focus-visible {
    outline: 2px solid $accent-gold-soft;
    outline-offset: 2px;
  }
}

/* ===========================
   Size Modifiers
   =========================== */
.btn-sm {
  padding: 0.4rem 0.875rem;
  font-size: 0.8rem;
  gap: 0.35rem;

  i {
    font-size: 0.95em;
  }
}

.btn-lg {
  padding: 0.75rem 1.75rem;
  font-size: 1rem;
}

/* ===========================
   Icon-Only Buttons
   =========================== */
.btn-icon {
  @extend %btn-base;
  padding: 0.5rem;
  background: $surface-layer-3;
  color: $text-secondary;
  border-color: $border-subtle;
  box-shadow: $shadow-depth-1;
  gap: 0;

  i {
    font-size: 1rem;
  }

  &:hover:not(:disabled) {
    background: $surface-layer-4;
    color: $text-primary;
  }

  &:active:not(:disabled) {
    background: $surface-layer-5;
  }
}

.btn-icon-sm {
  @extend .btn-icon;
  padding: 0.35rem;

  i {
    font-size: 0.875rem;
  }
}

/* Icon button variants */
.btn-icon-danger {
  @extend .btn-icon;
  color: #ef4444;

  &:hover:not(:disabled) {
    background: rgba(239, 68, 68, 0.15);
    border-color: #ef4444;
  }
}

.btn-icon-teal {
  @extend .btn-icon;
  color: $accent-teal;

  &:hover:not(:disabled) {
    background: rgba(66, 195, 198, 0.15);
    border-color: $accent-teal;
  }
}

.btn-icon-gold {
  @extend .btn-icon;
  color: $accent-gold-soft;

  &:hover:not(:disabled) {
    background: rgba(228, 184, 106, 0.15);
    border-color: $accent-gold-soft;
  }
}

/* ===========================
   Block Button (Full Width)
   =========================== */
.btn-block {
  width: 100%;
  justify-content: center;
}

/* ===========================
   Legacy Gradient Primary (Deprecated)
   Keep for backward compatibility temporarily
   =========================== */
.btn-primary-gradient {
  @extend %btn-base;
  background-image: linear-gradient(135deg, $accent-teal, $accent-gold-soft);
  color: $btn-accent-text;

  &:hover:not(:disabled) {
    filter: brightness(1.05);
  }

  &:active:not(:disabled) {
    filter: brightness(0.98);
  }
}
