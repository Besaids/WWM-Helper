<!-- eslint-disable @angular-eslint/template/interactive-supports-focus -->
<header class="app-header">
  <!-- Top row: logo + desktop nav + music icon + burger -->
  <div class="app-header-inner">
    <a class="brand" routerLink="/home">
      <img src="assets/portal/wwm-logo.png" alt="WWM Helper logo" class="brand-mark" />
    </a>

    <nav class="main-nav main-nav--desktop">
      <a routerLink="/home" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
        Home
      </a>
      <a routerLink="/timers" routerLinkActive="active">Timers</a>
      <a routerLink="/checklist" routerLinkActive="active">Checklist</a>
      <a routerLink="/guides" routerLinkActive="active">Guides</a>
    </nav>

    <button
      type="button"
      class="music-launcher"
      [class.music-launcher--hidden]="isMusicPlayerOpen()"
      (click)="openMusicPlayer()"
      aria-label="Open soundtrack player"
    >
      <span class="music-launcher-inner">
        <span class="music-launcher-diamond">
          <i class="bi bi-music-note-beamed"></i>
        </span>
      </span>
    </button>

    <button
      type="button"
      class="nav-toggle"
      (click)="toggleMenu()"
      [attr.aria-expanded]="isMenuOpen()"
      aria-label="Toggle navigation menu"
    >
      <i class="bi" [ngClass]="isMenuOpen() ? 'bi-x' : 'bi-list'"></i>
    </button>
  </div>

  <!-- Mobile dropdown menu: appears directly under logo+burger on small screens -->
  <nav class="mobile-menu" [class.mobile-menu--open]="isMenuOpen()">
    <a
      routerLink="/home"
      routerLinkActive="active"
      [routerLinkActiveOptions]="{ exact: true }"
      (click)="closeMenu()"
    >
      Home
    </a>
    <a routerLink="/timers" routerLinkActive="active" (click)="closeMenu()"> Timers </a>
    <a routerLink="/checklist" routerLinkActive="active" (click)="closeMenu()"> Checklist </a>
    <a routerLink="/guides" routerLinkActive="active" (click)="closeMenu()"> Guides </a>
  </nav>

  <!-- Player row: fixed-height drawer under navbar -->
  <div
    class="nav-music-player-container"
    [class.nav-music-player-container--open]="isMusicPlayerOpen()"
    (mouseenter)="onMusicAreaInteraction()"
    (mousemove)="onMusicAreaInteraction()"
    (click)="onMusicAreaInteraction()"
    (keydown)="onMusicAreaInteraction()"
    (focusin)="onMusicAreaInteraction()"
    (touchstart)="onMusicAreaInteraction()"
  >
    <div class="nav-music-player-shell">
      <app-music-player></app-music-player>
    </div>
  </div>
</header>
